webpackJsonp([26],{"5kaU":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a("0xDb");var l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"任务反馈","close-on-click-modal":!1,visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{ref:"dataForm",attrs:{model:e.dataForm,rules:e.dataRule},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.dataFormSubmit()}}},[a("el-form-item",{attrs:{label:"反馈内容",size:"small"}}),e._v(" "),a("el-input",{attrs:{size:"small",type:"textarea",rows:5,placeholder:"请输入反馈内容"},model:{value:e.dataForm.context,callback:function(t){e.$set(e.dataForm,"context",t)},expression:"dataForm.context"}}),e._v(" "),a("el-form",{staticClass:"demo-form-inline",staticStyle:{margin:"10px"},attrs:{inline:!0,model:e.dataForm}},[a("el-form-item",{attrs:{label:"状态",prop:"status",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.dataForm.status,callback:function(t){e.$set(e.dataForm,"status",t)},expression:"dataForm.status"}},e._l(e.statusList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),"1"==e.dataForm.status?a("el-form-item",{attrs:{label:"自我评分",prop:"selfScore",size:"small"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.dataForm.selfScore,callback:function(t){e.$set(e.dataForm,"selfScore",t)},expression:"dataForm.selfScore"}},e._l(e.selefSecoreList,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1):e._e()],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dataFormSubmit()}}},[e._v("确定")]),e._v(" "),a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取消")])],1)],1)},staticRenderFns:[]},s=a("VU/8")({data:function(){return{visible:!1,menuList:[],statusList:[{value:"0",label:"未完成"},{value:"1",label:"已完成"}],selefSecoreList:[{value:"1",label:"1"},{value:"2",label:"2"},{value:"3",label:"3"},{value:"4",label:"4"},{value:"5",label:"5"},{value:"6",label:"6"},{value:"7",label:"7"},{value:"8",label:"8"},{value:"9",label:"9"},{value:"10",label:"10"}],menuListTreeProps:{label:"name",children:"children"},dataForm:{id:0,taskId:"",context:"",curTime:"",submitter:"",status:"",read:"",comment:"",selfScore:"7"},dataRule:{context:[{required:!0,message:"反馈内容不能为空",trigger:"blur"}],status:[{required:!0,message:"状态不能为空",trigger:"blur"}],selfScore:[{required:!0,message:"自我评分不能为空",trigger:"blur"}]},tempKey:-666666}},methods:{init:function(e){this.dataForm.id=e||0,this.visible=!0,this.dataForm.status="",this.dataForm.context="",this.dataForm.taskId=e,this.$nextTick(function(){})},dataFormSubmit:function(){var e=this;this.$refs.dataForm.validate(function(t){t&&e.$http({url:e.$http.adornUrl("/generator/taskfeedback/save"),method:"post",data:e.$http.adornData({context:e.dataForm.context,status:e.dataForm.status,selfScore:0==e.dataForm.status?"":e.dataForm.selfScore,taskId:e.dataForm.taskId})}).then(function(t){var a=t.data;a&&0===a.code?e.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){e.visible=!1,e.$emit("refreshDataList")}}):e.$message.error(a.msg)})})}}},l,!1,null,null,null);t.default=s.exports}});